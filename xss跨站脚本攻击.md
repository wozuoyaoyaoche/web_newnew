# 同源策略(知识补充)

url结构如下:协议://domain:port/path/file

同源策略要求协议，domain，port必须完全一样

出现的目的是为了保障安全性，确保京东网站的cookie不会被百度网站读取

### 与xss的关系

网页中经常用js调用外站的资源链接，同源策略对js中的外链链接是没有约束力的

# xss分类

## 存储型

长期存放在服务器，有人访问就触发



## 反射型

单次的，不会存在服务器上，一般是构造好url，发给被攻击者，被攻击者点击进入才会触发  

被攻击者关闭页面后生失效

## dom型

存储在html dom树里的，本质还是存储型



# 利用beef配合xss

kali工具：beef-xss，默认工作在3000端口，可以浏览器打开，注意真实攻击时把127.0.0.1换成自己外网ip



# 测试xss方法和一些绕过

没有任何防护下，常规试验方法：

```html
<script>alert(1)</script>
```

弹窗1则表示有xss

## 大小写绕过

例如ScrIPT

## 单次过滤双写绕过

原理同sql注入

<scr<script>ipt>

## 利用img标签绕过

\<img src=1 onerror=alert(1)>

原理：加载src=1的资源，如果加载失败就alert（1）。

如果括号被和谐了，可以用\&#40; \&#41;转义



## 绕过括号过滤

可以用``反引号绕过



